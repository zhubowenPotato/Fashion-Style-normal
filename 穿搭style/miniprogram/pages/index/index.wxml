<!--pages/index/index.wxml-->

<!-- 每日推荐主区域 -->
<view class="daily-recommend-container">
  <!-- 顶部信息栏 -->
  <view class="info-bar">
    <view class="location-info" bindtap="refreshLocation">
      <text class="location-icon">📍</text>
      <text class="location-text">{{currentLocation || '获取位置中...'}}</text>
      <text class="refresh-icon">🔄</text>
    </view>
    <view class="weather-info" bindtap="refreshWeather">
      <text class="weather-icon">{{weatherIcon || '☀️'}}</text>
      <text class="weather-text">{{weatherInfo || '获取天气中...'}}</text>
      <text class="refresh-icon">🔄</text>
    </view>
  </view>

  <!-- 每日推荐标题 -->
  <view class="recommend-header">
    <text class="recommend-title">每日推荐</text>
    <text class="recommend-subtitle">AI为你量身定制今日穿搭</text>
  </view>

  <!-- 推荐内容区域 -->
  <view class="recommend-content">
    <view wx:if="{{!hasRecommendation}}" class="no-recommendation">
      <view class="no-recommendation-icon">👗</view>
      <text class="no-recommendation-text">还没有今日推荐</text>
      <text class="no-recommendation-desc">点击下方按钮开始生成</text>
    </view>
    
    <view wx:else class="recommendation-card">
      <view class="recommendation-image" style="height: {{imageDisplayHeight}}">
        <image src="{{recommendationImage}}" mode="aspectFit" class="outfit-image" bindtap="previewImage"></image>
        <view class="detail-button" catchtap="viewRecommendationDetails">
          <text class="detail-button-text">!</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 操作按钮区域 -->
  <view class="action-buttons">
    <button class="generate-btn" bindtap="generateRecommendation" disabled="{{isGenerating}}">
      <text wx:if="{{!isGenerating}}">🎯 生成今日穿搭</text>
      <text wx:else>生成中...</text>
    </button>
    <button class="refresh-btn" bindtap="refreshRecommendation" wx:if="{{hasRecommendation}}">
      <text>🔄 换一套</text>
    </button>
  </view>

  <!-- 快速操作 -->
  <view class="quick-actions">
    <view class="quick-action-item" bindtap="goToWardrobe">
      <text class="quick-action-icon">👔</text>
      <text class="quick-action-text">我的衣橱</text>
    </view>
    <view class="quick-action-item" bindtap="goToShop">
      <image class="quick-action-icon" src="/images/icon/weather.png" mode="aspectFit"></image>
      <text class="quick-action-text">小铺</text>
    </view>
    <view class="quick-action-item" bindtap="goToHistory">
      <text class="quick-action-icon">📅</text>
      <text class="quick-action-text">历史推荐</text>
    </view>
  </view>
</view>