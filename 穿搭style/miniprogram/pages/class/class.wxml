

<!-- è¡£æ©±é¡µé¢ - ç°ä»£åŒ–å·¦å³åˆ†æ å¸ƒå±€ -->
<view class="wardrobe-container">
  <!-- é¡¶éƒ¨æœç´¢æ  -->
  <view class="search-header">
    <view class="search-bar">
      <icon class="search-icon" type="search" size="16"></icon>
      <input class="search-input" placeholder="æœç´¢æˆ‘çš„è¡£æ©±" bindtap="onSearchTap" />
    </view>
    <view class="add-btn" bindtap="showAddMenu">
      <icon type="plus" size="20" color="#fff"></icon>
    </view>
  </view>

  <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
  <view class="main-content">
    <!-- å·¦ä¾§åˆ†ç±»æ  -->
    <view class="category-sidebar">
      <scroll-view class="category-list" scroll-y="true">
        <view 
          wx:for="{{categories}}" 
          wx:key="id" 
          class="category-item {{currentCategoryId === item.id ? 'active' : ''}}"
          bindtap="switchCategory"
          data-id="{{item.id}}"
        >
          <view class="category-icon">
            <image src="{{item.icon}}" mode="aspectFit"></image>
          </view>
          <text class="category-name">{{item.name}}</text>
          <text class="category-count">{{item.count}}</text>
        </view>
      </scroll-view>
    </view>

    <!-- å³ä¾§ç‰©å“å±•ç¤ºåŒº -->
    <view class="items-content">
      <view class="content-header">
        <text class="category-title">{{currentCategoryName}}</text>
        <text class="item-count">{{currentItemCount}}ä»¶</text>
      </view>
      
      <scroll-view class="items-grid" scroll-y="true">
        <view wx:if="{{currentItems.length === 0}}" class="empty-state">
          <view class="empty-icon-container">
            <icon class="empty-icon" type="photo" size="80" color="#ff6b9d"></icon>
          </view>
          <text class="empty-text">æš‚æ— {{currentCategoryName}}ï¼Œç‚¹å‡»å³ä¸Šè§’æ·»åŠ </text>
        </view>
        
        <view wx:else class="items-list">
          <view 
            wx:for="{{currentItems}}" 
            wx:key="id" 
            class="item-card"
            bindlongpress="showItemMenu"
            data-item="{{item}}"
          >
            <view class="item-image-container">
              <image class="item-image" src="{{item.image}}" mode="aspectFill"></image>
              <!-- AIè¯†åˆ«æ ‡è¯† -->
              <view class="ai-badge" wx:if="{{item.aiGenerated}}">
                <text class="ai-badge-text">AI</text>
              </view>
              <!-- ç½®ä¿¡åº¦æ ‡è¯† -->
              <view class="confidence-badge" wx:if="{{item.confidence && item.confidence > 0.8}}">
                <text class="confidence-text">{{Math.round(item.confidence * 100)}}%</text>
              </view>
              <view class="item-overlay">
                <view class="item-actions">
                  <view class="action-btn edit-btn" bindtap="editItem" data-item="{{item}}">
                    <icon type="edit" size="14" color="#fff"></icon>
                  </view>
                  <view class="action-btn delete-btn" bindtap="deleteItem" data-item="{{item}}">
                    <icon type="clear" size="14" color="#fff"></icon>
                  </view>
                </view>
              </view>
            </view>
            <view class="item-info">
              <view class="item-name-row">
                <text class="item-name">{{item.name}}</text>
                <view class="ai-icon" wx:if="{{item.aiGenerated}}">ğŸ¤–</view>
              </view>
              <text class="item-tags">{{item.tags}}</text>
              <view class="item-details" wx:if="{{item.style || item.color}}">
                <text class="item-style" wx:if="{{item.style}}">{{item.style}}</text>
                <text class="item-color" wx:if="{{item.color}}">{{item.color}}</text>
              </view>
            </view>
          </view>
        </view>
      </scroll-view>
    </view>
  </view>
</view>

<!-- æ·»åŠ èœå•å¼¹çª— -->
<view class="add-menu-modal {{showAddMenu ? 'show' : ''}}" bindtap="hideAddMenu">
  <view class="add-menu-content" catchtap="">
    <view class="menu-title">æ·»åŠ è¡£ç‰©</view>
    <view class="menu-options">
      <view class="menu-option" bindtap="chooseFromAlbum">
        <icon type="photo" size="24" color="#666"></icon>
        <text>ä»ç›¸å†Œé€‰æ‹©</text>
      </view>
      <view class="menu-option" bindtap="takePhoto">
        <icon type="camera" size="24" color="#666"></icon>
        <text>æ‹ç…§æ·»åŠ </text>
      </view>
    </view>
    <view class="menu-cancel" bindtap="hideAddMenu">å–æ¶ˆ</view>
  </view>
</view>

<!-- AIè¯†åˆ«è¿›åº¦å¼¹çª— -->
<view class="ai-recognition-modal {{showAIRecognition ? 'show' : ''}}">
  <view class="recognition-content">
    <view class="recognition-icon">
      <view class="loading-spinner"></view>
    </view>
    <text class="recognition-text">AIæ­£åœ¨è¯†åˆ«è¡£ç‰©ç±»å‹...</text>
    <text class="recognition-progress">{{recognitionProgress}}%</text>
  </view>
</view>