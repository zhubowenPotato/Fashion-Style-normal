# AI识别功能配置指南

## 概述

本项目已集成火山引擎方舟API，实现智能衣服识别功能。用户上传图片后，系统会自动调用AI分析衣服类型、风格、颜色等信息。

## 配置步骤

### 1. 获取火山引擎API Key

1. 访问 [火山引擎控制台](https://console.volcengine.com/)
2. 注册/登录账号
3. 进入方舟服务页面
4. 创建推理接入点
5. 获取API Key和推理接入点ID

### 2. 配置API信息

编辑 `miniprogram/config/aiConfig.js` 文件：

```javascript
const AI_CONFIG = {
  // 替换为您的实际API Key
  apiKey: 'your-actual-api-key-here',
  
  // 替换为您的实际推理接入点ID
  model: 'your-model-id-here',
  
  // 其他配置（通常不需要修改）
  baseUrl: 'https://ark.cn-beijing.volces.com/api/v3',
  enabled: true,
  timeout: 30000,
  retryCount: 2
};
```

### 3. 测试配置

配置完成后，在添加图片页面测试AI识别功能：

1. 选择一张衣服图片
2. 系统会自动调用AI识别
3. 查看识别结果是否正确

## 功能特性

### 智能识别
- **自动分类**：识别衣服类型（上衣、外套、裙装、裤装、鞋子、配饰、内衣）
- **风格分析**：分析衣服风格（休闲、正式、运动等）
- **颜色识别**：识别主要颜色
- **标签生成**：自动生成相关标签

### 用户体验
- **进度提示**：显示AI识别进度
- **结果预览**：识别完成后显示结果卡片
- **错误处理**：API失败时自动降级到模拟数据
- **重试机制**：网络失败时自动重试

### 标识系统
- **AI徽章**：左上角显示"AI"标识
- **置信度**：右上角显示识别置信度
- **机器人图标**：物品名称旁显示🤖图标
- **详细信息**：显示风格和颜色标签

## 配置选项

### 基本配置
- `apiKey`: 火山引擎API Key（必需）
- `model`: 推理接入点ID（必需）
- `baseUrl`: API地址（默认值通常不需要修改）

### 高级配置
- `enabled`: 是否启用AI识别（true/false）
- `timeout`: 请求超时时间（毫秒，默认30000）
- `retryCount`: 重试次数（默认2次）

## 故障排除

### 常见问题

1. **API Key未配置**
   - 症状：使用模拟数据
   - 解决：检查 `aiConfig.js` 中的 `apiKey` 配置

2. **网络请求失败**
   - 症状：显示网络错误
   - 解决：检查网络连接和API地址

3. **识别结果不准确**
   - 症状：分类或描述错误
   - 解决：确保图片清晰，衣服特征明显

4. **请求超时**
   - 症状：显示超时错误
   - 解决：增加 `timeout` 配置值

### 调试模式

在控制台查看详细日志：
```javascript
// 在浏览器控制台或微信开发者工具控制台查看
console.log('AI识别结果:', result);
```

## 成本说明

- 火山引擎方舟API按调用次数计费
- 建议在开发阶段设置 `enabled: false` 使用模拟数据
- 生产环境启用前请确认计费规则

## 技术支持

如遇到问题，请检查：
1. API Key是否正确
2. 网络连接是否正常
3. 图片格式是否支持
4. 控制台错误日志

---

*最后更新：2024年*
